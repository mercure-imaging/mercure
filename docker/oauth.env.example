# OAuth2 Proxy Configuration for Microsoft Entra ID (Azure AD)
# Copy this file to /opt/mercure/config/oauth2.env and configure the values

# Provider Settings
OAUTH2_PROXY_PROVIDER=azure

# Azure AD Application Registration Details
# Create an app registration in Azure AD and get these values:
OAUTH2_PROXY_AZURE_TENANT=your-tenant-id-here

OAUTH2_PROXY_CLIENT_ID=your-client-id-here
OAUTH2_PROXY_CLIENT_SECRET=your-client-secret-here

# Redirect URL (must match what's configured in Azure AD)
OAUTH2_PROXY_REDIRECT_URL=http://localhost:8000/oauth2/callback

# Cookie Settings
OAUTH2_PROXY_COOKIE_NAME=_oauth2_proxy
OAUTH2_PROXY_COOKIE_SECRET=put-a-32-character-random-string-here
OAUTH2_PROXY_COOKIE_DOMAIN=localhost

# Optional: Restrict to specific users or groups
# Leave empty to allow all users in your tenant
OAUTH2_PROXY_ALLOWED_GROUPS=
OAUTH2_PROXY_ALLOWED_EMAILS=

# Admin Groups (users in these groups will have admin access)
# This should match the groups in your Azure AD
OAUTH2_ADMIN_GROUPS=mercure-admins,IT-Administrators

# Session timeout (in seconds)
OAUTH2_PROXY_COOKIE_EXPIRE=3600

# Logging
OAUTH2_PROXY_REQUEST_LOGGING=true
OAUTH2_PROXY_STANDARD_LOGGING=true
OAUTH2_PROXY_AUTH_LOGGING=true